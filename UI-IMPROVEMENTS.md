# UI 改进说明

## 改进概述

基于现代看板界面参考图，对整个 UI 进行了重新设计，从深色主题切换到浅色清爽主题。

## 主要改进

### 1. **配色方案转变**

**之前（深色 Nord 主题）：**
- 背景：深灰色 `#2E3440`
- 卡片：深蓝灰 `#3B4252`
- 文字：浅色 `#ECEFF4`

**现在（现代浅色主题）：**
- 背景：浅灰蓝 `#F5F7FA`
- 卡片：纯白 `#FFFFFF`
- 列背景：浅灰 `#ECEFF4`
- 文字：深色 `#2E3440`

### 2. **任务卡片设计**

#### 改进前
```
┌─────────────────────────┐
│ Task Title [HIGH]       │
│                         │
│ Content preview...      │
│                         │
│                  #001   │
└─────────────────────────┘
```
- 固定高度
- 优先级用括号文字标记
- 深色背景

#### 改进后
```
┌─────────────────────────────┐
│ Task Title                  │
│                             │
│ Content preview text here...│
│                             │
│ [High]          2024-04-01  │
└─────────────────────────────┘
```
- 自适应内容高度
- **彩色优先级徽章**（参考图风格）
  - High: 红色 `#BF616A` 背景 + 白色文字
  - Medium: 黄色 `#EBCB8B` 背景 + 深色文字
  - Low: 蓝色 `#81A1C1` 背景 + 白色文字
- 显示创建日期
- 白色卡片 + 浅边框
- 选中时深色背景 + 蓝色边框

### 3. **列（Column）设计**

#### 改进前
```
┌─────────────────────┐
│  TODO (3)           │
│  [突出的标题栏]      │
├─────────────────────┤
│ [任务卡片]           │
│ [任务卡片]           │
└─────────────────────┘
```
- 深色背景
- 标题栏占用较多空间
- 任务数量在括号里

#### 改进后
```
Todo            3
─────────────────────
[任务卡片]
[任务卡片]
[任务卡片]
```
- **极简标题设计**（参考图风格）
- 标题 + 数字徽章并排
- 浅色列背景 `#ECEFF4`
- 更多空间给任务卡片
- 选中列时背景变暗

### 4. **整体布局**

#### 改进前
- 深色背景
- 紧凑的间距
- 工具栏占用空间大

#### 改进后
- **浅色背景** `#F5F7FA`
- **更大的间距**（列间距 4，卡片间距 3）
- **精简的顶部工具栏**
  - 白色背景卡片
  - 清晰的快捷键提示
  - 更好的视觉层次

### 5. **快捷键提示栏**

**改进前：**
```
hjkl nav  a add  e edit  d delete  H/L move  q back
```

**改进后：**
```
Navigate: h/j/k/l  •  Add: a  •  Edit: e  •  Delete: d  •  Move: H/L  •  Back: q/ESC
```
- 更清晰的分组
- 使用 `•` 分隔符
- 标签 + 按键的格式
- 更好的颜色区分

### 6. **空状态设计**

**改进前：**
```
No tasks

Press 'a' to add
```
- 简单的文字提示

**改进后：**
```
┌─────────────────────┐
│                     │
│   No tasks          │
│                     │
│   Press 'a' to add  │
│                     │
└─────────────────────┘
```
- 白色卡片
- 更好的视觉引导
- 居中对齐

## 视觉对比

### 配色对比

| 元素 | 旧设计 | 新设计 |
|------|--------|--------|
| 主背景 | `#2E3440` 深灰 | `#F5F7FA` 浅灰蓝 |
| 卡片 | `#3B4252` 深蓝灰 | `#FFFFFF` 纯白 |
| 列背景 | `#2E3440` 深灰 | `#ECEFF4` 浅灰 |
| 标题文字 | `#ECEFF4` 浅色 | `#2E3440` 深色 |
| 内容文字 | `#D8DEE9` 浅灰 | `#4C566A` 中灰 |
| 边框 | `#4C566A` 中灰 | `#E5E9F0` 极浅灰 |
| 强调色 | `#88C0D0` 青色 | `#5E81AC` 蓝色 |

### 间距对比

| 元素 | 旧值 | 新值 |
|------|------|------|
| 卡片宽度 | 45 | 52 |
| 列宽度 | 51 | 58 |
| 列间距 | 3 | 4 |
| 卡片间距 | 3 | 3 |
| 卡片内边距 | 2 | 3 |
| 页面边距 | 3 | 4 |

## 参考图借鉴

从参考图中学习的设计元素：

1. ✅ **浅色配色方案** - 更现代、更清爽
2. ✅ **彩色优先级徽章** - 视觉识别度高
3. ✅ **极简列标题** - 节省空间、清晰明了
4. ✅ **白色卡片** - 类似便签纸的感觉
5. ✅ **更大的留白** - 减少视觉压力
6. ✅ **日期显示** - 增加时间信息
7. ✅ **圆润的设计语言** - 更友好的视觉

## 技术细节

### 优先级徽章实现

```rust
let (priority_text, priority_bg, priority_fg) = match priority.as_str() {
    "high" => ("High", "#BF616A", "#FFFFFF"),
    "medium" => ("Medium", "#EBCB8B", "#2E3440"),
    "low" => ("Low", "#81A1C1", "#FFFFFF"),
    _ => ("", "#4C566A", "#D8DEE9"),
};

node! {
    div(bg: (Color::hex(priority_bg)), pad: 0, pad_h: 2) [
        text(priority_text, color: (Color::hex(priority_fg)), bold)
    ]
}
```

### 日期格式化

```rust
let date_str = if task.created.contains('T') {
    // ISO format: "2024-04-01T10:30:00Z" -> "2024-04-01"
    task.created.split('T').next().unwrap_or("").to_string()
} else if task.created.len() > 10 {
    // Unix timestamp -> "Recent"
    "Recent".to_string()
} else {
    task.created.clone()
};
```

### 选中状态

```rust
// 卡片选中效果
let bg_color = if is_selected { "#434C5E" } else { "#FFFFFF" };
let border_color = if is_selected { "#88C0D0" } else { "#E5E9F0" };
let title_color = if is_selected { "#ECEFF4" } else { "#2E3440" };

// 列选中效果
let column_bg = if is_selected_column { "#E5E9F0" } else { "#ECEFF4" };
```

## 关于快捷键问题

**当前状态：**
快捷键绑定代码已正确实现（使用 `@char_global` 和 `@key_global`），但在某些终端环境中可能不响应。

**可能的原因：**
1. rxtui 框架的事件处理机制
2. 终端模拟器的键盘输入映射
3. 终端配置问题

**下一步调试：**
- 在不同终端测试（iTerm2, Terminal.app, Alacritty）
- 检查 rxtui 的事件日志
- 尝试简化快捷键绑定

## 构建和运行

```bash
# 构建新版本
cargo build --release

# 运行
./run.sh
# 或
cargo run --release
```

## 总结

这次改进将看板从**深色程序员风格**转变为**现代浅色办公风格**：

- ✅ 更清爽的视觉体验
- ✅ 更好的信息层次
- ✅ 更现代的设计语言
- ✅ 更大的留白和间距
- ✅ 彩色优先级徽章
- ✅ 日期信息显示

界面现在更接近参考图的设计风格，同时保持了终端应用的实用性和性能。
