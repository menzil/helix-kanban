# 快捷键测试清单

运行应用后，请按照以下步骤测试所有快捷键。

## 准备工作

```bash
# 清理之前的调试日志
rm /tmp/kanban_debug.log

# 运行应用
cargo run --release
# 或
./run.sh
```

---

## 测试 1: Project List 视图

启动应用后，你应该看到项目列表。

### 导航测试
- [ ] 按 `j` - 向下移动选择（光标应该移动到下一个项目）
- [ ] 按 `k` - 向上移动选择（光标应该移动到上一个项目）
- [ ] 按 `↓` - 向下移动选择（与 `j` 相同效果）
- [ ] 按 `↑` - 向上移动选择（与 `k` 相同效果）

### 项目操作测试
- [ ] 按 `n` - 应该弹出"Create New Project"对话框
  - [ ] 输入项目名称（任意字符）
  - [ ] 按 `Enter` 确认创建
  - [ ] 检查新项目是否出现在列表中

- [ ] 选中一个项目，按 `e` - 应该弹出"Edit Project"对话框
  - [ ] 修改项目名称
  - [ ] 按 `Enter` 确认
  - [ ] 检查项目名称是否更新

- [ ] 按 `Enter` - 应该打开选中的项目（进入 Board 视图）

### 退出测试
- [ ] 按 `q` - 应该退出应用
- [ ] 重新启动，按 `ESC` - 应该退出应用

---

## 测试 2: Board 视图

1. 从项目列表选择"Demo Project"并按 `Enter` 进入

### 列导航测试（最重要！）
- [ ] 按 `h` 或 `←` - 向左切换列（光标应移动到左边的列）
- [ ] 按 `l` 或 `→` - 向右切换列（光标应移动到右边的列）
- [ ] 确认列切换时，列的背景颜色有变化（选中的列背景较暗）

### 任务导航测试
- [ ] 按 `j` 或 `↓` - 在当前列中向下移动选择任务
- [ ] 按 `k` 或 `↑` - 在当前列中向上移动选择任务
- [ ] 确认选中的任务卡片有高亮显示（深色背景+蓝色边框）

### 任务创建测试
- [ ] 按 `a` - 应该弹出"Create New Task"对话框
  - [ ] 输入任务标题
  - [ ] 按 `Enter` 确认
  - [ ] 检查新任务是否出现在当前列中

### 任务编辑测试
- [ ] 选中一个任务，按 `e` - 应该弹出"Edit Task"对话框（不是"Edit Project"！）
  - [ ] 修改任务标题
  - [ ] 按 `Enter` 确认
  - [ ] 检查任务标题是否更新

### 任务删除测试
- [ ] 选中一个任务，按 `d` - 任务应该被删除
- [ ] 确认任务从列表中消失

### 任务移动测试（最重要！）
- [ ] 在"Todo"列选中一个任务
- [ ] 按 `L`（Shift+l）- 任务应该移动到"Doing"列
- [ ] 在"Done"列选中一个任务
- [ ] 按 `H`（Shift+h）- 任务应该移动到"Doing"列

### 返回测试
- [ ] 按 `q` - 应该返回项目列表
- [ ] 重新进入 Board 视图，按 `ESC` - 应该返回项目列表

---

## 测试 3: 输入对话框

### 创建项目时测试
1. 在项目列表按 `n` 进入创建对话框

- [ ] 输入小写字母 a-z
- [ ] 输入大写字母 A-Z
- [ ] 输入数字 0-9
- [ ] 输入空格
- [ ] 输入符号：`-`, `_`, `.`
- [ ] 按 `Backspace` 删除字符
- [ ] 输入完整名称后按 `Enter` 确认创建
- [ ] 按 `ESC` 取消（不创建）

### 创建任务时测试
1. 进入 Board 视图，按 `a` 进入创建对话框

- [ ] 输入混合内容（字母+数字+符号）
- [ ] 按 `Backspace` 删除
- [ ] 按 `Enter` 确认
- [ ] 再次按 `a`，按 `ESC` 取消

---

## 常见问题排查

### 如果某个快捷键不工作：

1. **检查是否在正确的视图中**
   - Board 视图的快捷键只在 Board 视图中工作
   - Project List 的快捷键只在项目列表中工作

2. **检查是否有焦点**
   - 启动后应该自动有焦点
   - 如果怀疑没有焦点，尝试按 `Tab` 键

3. **检查大小写**
   - `h/l` 是小写 - 切换列
   - `H/L` 是大写（Shift+h/l）- 移动任务

4. **检查是否在对话框中**
   - 在对话框中，字母键用于输入
   - 必须先按 `ESC` 或 `Enter` 退出对话框

### 如果仍然有问题：

```bash
# 查看构建警告
cargo build --release

# 检查是否有旧的调试日志
cat /tmp/kanban_debug.log

# 清理并重新构建
cargo clean
cargo build --release
```

---

## 成功标准

✅ **所有快捷键都应该立即响应，没有延迟**
✅ **在正确的视图中按键应该触发正确的操作**
✅ **不同视图的快捷键不应该相互干扰**
✅ **对话框的输入应该正常工作**

如果所有测试都通过，说明快捷键修复成功！🎉
